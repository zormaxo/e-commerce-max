"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[223],{8223:(S,c,i)=>{i.r(c),i.d(c,{AccountModule:()=>w});var u=i(6895),g=i(9066),r=i(433),a=i(9383),t=i(1571),m=i(9241),p=i(740),d=i(4015);let f=(()=>{class e{constructor(o,n,l){this.accountService=o,this.router=n,this.activatedRoute=l,this.cancelRegister=new t.vpe,this.loginForm=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email]),password:new r.NI("",[r.kI.required,r.kI.minLength(4),r.kI.maxLength(8)])}),this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/"}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>this.router.navigateByUrl(this.returnUrl)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.B),t.Y36(a.F0),t.Y36(a.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],outputs:{cancelRegister:"cancelRegister"},decls:8,vars:7,consts:[[1,"mt-3",3,"formGroup","ngSubmit"],[3,"formControl","label"],[3,"formControl","label","type"],[1,"text-center"],["type","submit",1,"btn","btn-success","me-2",3,"disabled"],["routerLink","","type","button",1,"btn","btn-outline-secondary"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t._UZ(1,"app-text-input",1)(2,"app-text-input",2),t.TgZ(3,"div",3)(4,"button",4),t._uU(5,"Sign in"),t.qZA(),t.TgZ(6,"button",5),t._uU(7,"Cancel"),t.qZA()()()),2&o&&(t.Q6J("formGroup",n.loginForm),t.xp6(1),t.Q6J("formControl",n.loginForm.controls.email)("label","Email Address"),t.xp6(1),t.Q6J("formControl",n.loginForm.controls.password)("label","Password")("type","password"),t.xp6(2),t.Q6J("disabled",!n.loginForm.valid))},dependencies:[r._Y,r.JJ,r.JL,r.oH,r.sg,a.rH,d.t]}),e})();var h=i(8372),v=i(5698),b=i(3900),C=i(4004),y=i(8746);function F(e,s){if(1&e&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&e){const o=s.$implicit;t.xp6(1),t.hij(" ",o," ")}}function x(e,s){if(1&e&&(t.TgZ(0,"ul",9),t.YNc(1,F,2,1,"li",10),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.errors)}}let A=(()=>{class e{constructor(o,n,l){this.fb=o,this.accountService=n,this.router=l,this.cancelRegister=new t.vpe,this.validationErrors=[],this.errors=null,this.registerForm=this.fb.group({email:["",[r.kI.required,r.kI.email],[this.validateEmailNotTaken()]],firstName:["",r.kI.required],lastName:["",r.kI.required],password:["",[r.kI.required,r.kI.minLength(4),r.kI.maxLength(8)]],confirmPassword:["",[r.kI.required,this.matchValues("password")]]})}ngOnInit(){this.intitializeForm()}intitializeForm(){this.registerForm.controls.password.valueChanges.subscribe({next:()=>this.registerForm.controls.confirmPassword.updateValueAndValidity()})}matchValues(o){return n=>n.value===n.parent?.get(o)?.value?null:{notMatching:!0}}validateEmailNotTaken(){return o=>o.valueChanges.pipe((0,h.b)(1e3),(0,v.q)(1),(0,b.w)(()=>this.accountService.checkEmailExists(o.value).pipe((0,C.U)(n=>n.result?{emailExists:!0}:null),(0,y.x)(()=>o.markAsTouched()))))}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>this.router.navigateByUrl("/"),error:o=>this.errors=o.errors})}register(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.router.navigateByUrl("/")},error:o=>{this.validationErrors=o}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(p.B),t.Y36(a.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-register"]],outputs:{cancelRegister:"cancelRegister"},decls:12,vars:13,consts:[[1,"mt-3",3,"formGroup","ngSubmit"],["label","First Name",3,"formControl"],["label","Last Name",3,"formControl"],["autocomplete","username",3,"formControl","label"],[3,"formControl","label","type"],["class","text-danger list-unstyled",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-success","me-2",3,"disabled"],["routerLink","","type","button",1,"btn","btn-outline-secondary"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t._UZ(1,"app-text-input",1)(2,"app-text-input",2)(3,"app-text-input",3)(4,"app-text-input",4)(5,"app-text-input",4),t.YNc(6,x,2,1,"ul",5),t.TgZ(7,"div",6)(8,"button",7),t._uU(9,"Sign up"),t.qZA(),t.TgZ(10,"button",8),t._uU(11,"Cancel"),t.qZA()()()),2&o&&(t.Q6J("formGroup",n.registerForm),t.xp6(1),t.Q6J("formControl",n.registerForm.controls.firstName),t.xp6(1),t.Q6J("formControl",n.registerForm.controls.lastName),t.xp6(1),t.Q6J("formControl",n.registerForm.controls.email)("label","Email Address"),t.xp6(1),t.Q6J("formControl",n.registerForm.controls.password)("label","Password")("type","password"),t.xp6(1),t.Q6J("formControl",n.registerForm.controls.confirmPassword)("label","Confirm Password")("type","password"),t.xp6(1),t.Q6J("ngIf",n.errors),t.xp6(2),t.Q6J("disabled",n.registerForm.invalid))},dependencies:[u.sg,u.O5,r._Y,r.JJ,r.JL,r.oH,r.sg,a.rH,d.t]}),e})();const J=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-account"]],decls:15,vars:1,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-auto"],["routerLink","",1,"link-dark","text-decoration-none"],[1,"bg-warning","p-2"],[1,"row","justify-content-center","mt-5"],[1,"col-10","col-md-6","col-lg-4"],[1,"card","shadow-lg"],[1,"card-body"],[3,"justified"],["heading","Sign in"],["heading","Sign up"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"h1",4),t._uU(5,"e-commerce-max"),t.qZA()()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"tabset",9)(11,"tab",10),t._UZ(12,"app-login"),t.qZA(),t.TgZ(13,"tab",11),t._UZ(14,"app-register"),t.qZA()()()()()()()),2&o&&(t.xp6(10),t.Q6J("justified",!0))},dependencies:[a.rH,m.wW,m.AH,f,A]}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.Bz.forChild(J),a.Bz]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,r.u5,r.UX,Z,g.m]}),e})()}}]);