<div class="accordion accordion-flush" id="accordionExample">
  <ng-container *ngFor="let category of shopService.categoryWithCounts$ | async as categoryWithCounts; let i = index">
    <div class="accordion-item text-bg-light" *ngIf="category.parent === null || category.parent === undefined">
      <div class="accordion-header d-flex align-items-center">
        <img src="{{ '../../assets/icons/' + category.url + '.svg' }}" alt="" style="width: 20px" />
        <a
          class="m-1 fw-bold text-dark"
          [routerLink]="['/', category.url, category.url]"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasExample"
          >{{ category.name }}</a
        >
        <small
          ><span class="small text-muted">({{ category.count }})</span></small
        >
        <a
          *ngIf="category.childCategories"
          class="ms-auto justify-content-center rounded-pill py-1"
          style="width: 30px; box-shadow: none"
          data-bs-toggle="collapse"
          [class.accordion-button]="category.childCategories"
          [attr.data-bs-target]="'#collapse' + i">
        </a>
      </div>
      <div
        *ngIf="category.childCategories"
        id="collapse{{ i }}"
        class="ms-4 accordion-collapse collapse show"
        aria-labelledby="headingOne">
        <div class="accordion-body p-0 pb-1">
          <div *ngFor="let child of category.childCategories">
            <a
              class="small link-dark"
              [routerLink]="['/', category.url, child.url]"
              data-bs-toggle="offcanvas"
              data-bs-target="#offcanvasExample"
              >{{ child.name }}
            </a>
            <small
              ><span class="small text-muted">({{ child.count }})</span></small
            >
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>
